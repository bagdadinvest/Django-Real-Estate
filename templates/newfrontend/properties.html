{% extends 'newfrontend/base.html' %}
{% load static %}
{% load humanize %}
{% load i18n %}
{% block nav_properties_active %}active{% endblock %}
{% block title %}Villa Agency - Properties{% endblock %}
{% block content %}
  <div class="page-heading header-text">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <span class="breadcrumb"><a href="{% url 'new_index' %}">{% trans "Home" %}</a> / {% trans "Properties" %}</span>
          <h3>{% trans "Properties" %}</h3>
        </div>
      </div>
    </div>
  </div>

  <div class="section properties">
    <div class="container">
      <ul class="properties-filter">
        <li><a class="is_active" href="#!" data-filter="*">{% trans "Show All" %}</a></li>
        <li><a href="#!" data-filter=".adv">{% trans "Apartment" %}</a></li>
        <li><a href="#!" data-filter=".str">{% trans "Villa House" %}</a></li>
        <li><a href="#!" data-filter=".rac">{% trans "Penthouse" %}</a></li>
      </ul>

      <div class="row properties-box">
        {% if listings %}
          {% for listing in listings %}
            <div class="col-lg-4 col-md-6 align-self-center mb-30 properties-items adv">
              <div class="item">
                <a href="{% url 'new_listing_detail' listing.id %}">
                  <img src="{{ listing.photo_main.url }}" alt="{{ listing.title }}">
                </a>
                <span class="category">{{ listing.property_type }}</span>
                <h6>â‚¦{{ listing.price|intcomma }}</h6>
                <h4>
                  <a href="{% url 'new_listing_detail' listing.id %}">{{ listing.title }}</a>
                </h4>
                <ul>
                  <li>{% trans "Bedrooms" %}: <span>{{ listing.bedrooms }}</span></li>
                  <li>{% trans "Bathrooms" %}: <span>{{ listing.bathrooms }}</span></li>
                  <li>{% trans "City" %}: <span>{{ listing.city }}</span></li>
                  <li>{% trans "State" %}: <span>{{ listing.state }}</span></li>
                </ul>
                <div class="main-button">
                  <a href="{% url 'new_listing_detail' listing.id %}">{% trans "More Info" %}</a>
                </div>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="col-12"><p>{% trans "No Listings Available" %}</p></div>
        {% endif %}
      </div>

      <div class="row">
        <div class="col-lg-12">
          {% if listings.has_other_pages %}
            <ul class="pagination">
              {% if listings.has_previous %}
                <li><a href="?page={{ listings.previous_page_number }}">&laquo;</a></li>
              {% else %}
                <li class="disabled"><a>&laquo;</a></li>
              {% endif %}

              {% for i in listings.paginator.page_range %}
                {% if listings.number == i %}
                  <li><a class="is_active" href="?page={{ i }}">{{ i }}</a></li>
                {% else %}
                  <li><a href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
              {% endfor %}

              {% if listings.has_next %}
                <li><a href="?page={{ listings.next_page_number }}">&raquo;</a></li>
              {% else %}
                <li class="disabled"><a>&raquo;</a></li>
              {% endif %}
            </ul>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
